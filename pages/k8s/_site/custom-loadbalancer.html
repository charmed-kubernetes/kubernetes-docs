<p><strong>Charmed Kubernetes</strong> supports setting a
custom IP address for the control plane.  There are two ways of achieving this, depending
on which type of load balancing solution you wish to configure:</p>

<ul>
  <li>
    <p>If you have a virtual IP to place in front of machines, configure the settings on the
<code class="highlighter-rouge">kubeapi-load-balancer</code> charm.</p>
  </li>
  <li>
    <p>If a full load balancing solution is in place such as an F5 appliance, remove the
 <code class="highlighter-rouge">kubeapi-load-balancer</code> and use the settings on the <code class="highlighter-rouge">kubernetes-master</code> charm to
  configure the load balancer.</p>
  </li>
</ul>

<p>Both solutions are described in the sections below.</p>

<h1 id="virtual-ip-in-front-of-kubeapi-load-balancer">Virtual IP in front of kubeapi-load-balancer</h1>

<p>If you have a virtual IP in front of the kubeapi-load-balancer
units which isn’t charm based, you should use the loadbalancer-ips configuration to
specify them:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>juju config kubeapi-load-balancer loadbalancer-ips<span class="o">=</span><span class="s2">"10.0.0.1 10.0.0.2"</span>
</code></pre></div></div>

<p>Multiple IP addresses should be given as a space-separated list.</p>

<h1 id="custom-load-balancer-in-front-of-kubernetes-master-charm">Custom load balancer in front of kubernetes-master charm</h1>

<p>If you have a full load balancer such as an F5 appliance or OpenStack’s Neutron,
use the configuration options on the <code class="highlighter-rouge">kubernetes-master</code> charm and forgo
<code class="highlighter-rouge">kubeapi-load-balancer</code>  entirely.</p>

<p>Remove the <code class="highlighter-rouge">kubeapi-load-balancer</code> application if it exists:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>juju remove-application kubeapi-load-balancer
</code></pre></div></div>

<p>Then configure the IP addresses provided by the load balancing solution with the
<code class="highlighter-rouge">kubernetes-master</code> charm.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>juju config kubernetes-master loadbalancer-ips<span class="o">=</span><span class="s2">"192.168.1.1 192.168.2.1"</span>
</code></pre></div></div>

<p>Multiple IP addresses should be given as a space-separated list.</p>

<!-- FEEDBACK -->
<div class="p-notification--information">
  <p class="p-notification__response">
    We appreciate your feedback on the documentation. You can 
    <a href="https://github.com/charmed-kubernetes/kubernetes-docs/edit/master/pages/k8s/custom-loadbalancer.md" class="p-notification__action">edit this page</a> 
    or 
    <a href="https://github.com/charmed-kubernetes/kubernetes-docs/issues/new" class="p-notification__action">file a bug here</a>.
  </p>
</div>
