<p><a href="https://github.com/coreos/flannel">Flannel</a> is a simple, lightweight layer 3 fabric for Kubernetes. Flannel manages an
IPv4 network between multiple nodes in a cluster. It does not control how containers
are networked to the host, only how the traffic is transported between hosts. For
more complicated scenarios, see also <a href="/kubernetes/docs/cni-calico">Calico</a> and <a href="/kubernetes/docs/cni-canal">Canal</a></p>

<h2 id="deploying-charmed-kubernetes-with-flannel">Deploying <strong>Charmed Kubernetes</strong> with flannel</h2>

<p>Flannel is the default choice for networking with <strong>Charmed Kubernetes</strong>. If you
<a href="/kubernetes/docs/quickstart">deploy the bundle</a> without changing the default settings,
flannel will be used for CNI.</p>

<h2 id="flannel-options">Flannel options</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Default value</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>cidr</td>
      <td>string</td>
      <td>10.1.0.0/16</td>
      <td>Network CIDR to assign to Flannel</td>
    </tr>
    <tr>
      <td>iface</td>
      <td>string</td>
      <td>see description&gt;</td>
      <td>The interface to bind flannel overlay networking. The default value is the interface bound to the CNI endpoint.</td>
    </tr>
    <tr>
      <td>nagios_context</td>
      <td>string</td>
      <td>juju</td>
      <td>A string that will be prepended to instance name to set the host name in nagios. If youâ€™re running multiple environments with the same services in them this allows you to differentiate between them. Used by the nrpe subordinate charm.</td>
    </tr>
    <tr>
      <td>nagios_servicegroups</td>
      <td>string</td>
      <td>(empty)</td>
      <td>A comma-separated list of nagios servicegroups. If left empty, the <code class="highlighter-rouge">nagios_context</code> will be used as the servicegroup</td>
    </tr>
  </tbody>
</table>

<h3 id="checking-the-current-configuration">Checking the current configuration</h3>

<p>To check the current configuration settings for Flannel, run the command:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>juju config flannel
</code></pre></div></div>

<h3 id="setting-a-config-option">Setting a config option</h3>

<p>To set an option, simply run the config command with and additional <code class="highlighter-rouge">&lt;key&gt;=&lt;value&gt;</code> argument. For example, to set a specific network CIDR:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>juju config flannel <span class="nv">cidr</span><span class="o">=</span><span class="s2">"10.5.0.0/16"</span>
</code></pre></div></div>

<h2 id="troubleshooting">Troubleshooting</h2>

<p>If there is an issue with connectivity, it can be useful to inspect the Juju logs. To
see a complete set of logs for flannel:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>juju debug-log <span class="nt">--replay</span> <span class="nt">--include</span><span class="o">=</span>flannel
</code></pre></div></div>

<p>For additional troubleshooting pointers, please see the <a href="/kubernetes/docs/troubleshooting">dedicated troubleshooting page</a>.</p>

<!-- LINKS -->

<!-- FEEDBACK -->
<div class="p-notification--information">
  <p class="p-notification__response">
    We appreciate your feedback on the documentation. You can 
    <a href="https://github.com/charmed-kubernetes/kubernetes-docs/edit/master/pages/k8s/cni-flannel.md" class="p-notification__action">edit this page</a> 
    or 
    <a href="https://github.com/charmed-kubernetes/kubernetes-docs/issues/new" class="p-notification__action">file a bug here</a>.
  </p>
</div>
