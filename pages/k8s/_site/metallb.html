<h1 id="about">About</h1>

<p><a href="https://metallb.universe.tf">MetalLB</a> is a Kubernetes-aware solution that will monitor for services with
the type <code class="highlighter-rouge">LoadBalancer</code> and assign them an IP address from a virtual pool.</p>

<p>It uses BGP(<a href="https://tools.ietf.org/html/rfc1105">Border Gateway Protocol</a>) or ARP(<a href="https://tools.ietf.org/html/rfc826">Address Resolution Protocol</a>)
to expose services.</p>

<p>MetalLB has support for local traffic, meaning that the machine that receives the
data will be the machine that services the request. It is not suggested to use a
virtual IP with high traffic workloads because only one machine will receive the
traffic for a service - the other machines are solely used for failover.</p>

<p>BGP does not have this limitation but does see nodes as the atomic unit. This means
if the service is running on two of five nodes then only those two nodes will receive
traffic, but they will each receive 50% of the traffic even if one of the nodes has
three pods and the other only has one pod running on it. It is recommended to use node
anti-affinity to prevent Kubernetes pods from stacking on a single node.</p>

<div class="p-notification--positive">
<p class="p-notification__response">
<span class="p-notification__status">Note:</span>
For more information on configuring MetalLB with Calico in BGP mode,
please see this
<a href="https://metallb.universe.tf/configuration/calico/">
explanation of the required configuration</a> from the
<a href="https://metallb.universe.tf/"> MetalLB website</a>

</p></div>

<p>Currently, the best way to install MetalLB on Charmed Kubernetes is with a helm chart:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>helm <span class="nb">install</span> <span class="nt">--name</span> metallb stable/metallb
</code></pre></div></div>
<p>Further configuration can be performed by using a <a href="https://metallb.universe.tf/configuration/">MetalLB configmap</a>.</p>

<!-- LINKS -->

<!-- FEEDBACK -->
<div class="p-notification--information">
  <p class="p-notification__response">
    We appreciate your feedback on the documentation. You can 
    <a href="https://github.com/charmed-kubernetes/kubernetes-docs/edit/master/pages/k8s/metallb.md" class="p-notification__action">edit this page</a> 
    or 
    <a href="https://github.com/charmed-kubernetes/kubernetes-docs/issues/new" class="p-notification__action">file a bug here</a>.
  </p>
</div>
